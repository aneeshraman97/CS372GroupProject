<!DOCTYPE html>

<html>

	<head>
		
		<title>Login</title>
		
		<meta charset="utf-8">
	    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	    <meta name="google-signin-client_id" content="783497289681-md44u43oh563o2jrf0gjsfbtgr6oh2qg.apps.googleusercontent.com">
	    
	    <!-- Tab Image -->
	    <link rel="tempbox icon" href="./images/logo.ico" />
	   
	    <!-- Custom CSS -->
	    <link href="dashboard.css" rel="stylesheet" type="text/css">
	    
	    <!-- Bootstrap and font awesome-->
	    <link href="./css/bootstrap.min.css" rel="stylesheet" type="text/css">
	    <link href="./css/font-awesome.min.css" rel="stylesheet" type="text/css"/>
		<script src="https://apis.google.com/js/platform.js" async defer></script>
		
	</head>

	<body>
	
		<!-- BEGIN NAVBAR -->
	            
        <nav class="navbar navbar-expand-md navbar-dark fixed-top bg-dark">
            <a class="navbar-brand" href="index.html" id="dashboardLogo">
                <img src="./images/logo.ico" width="25px" height="25px"> Doc -> Dash
            </a>
            <button class="navbar-toggler d-lg-none" type="button" data-toggle="collapse" data-target="#navbarsExampleDefault" aria-controls="navbarsExampleDefault" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarsExampleDefault">
                <ul class="navbar-nav mr-auto" id="links1">
                    <li class="nav-item">
                        <a class="nav-link" href="./index.html"><i class="fa fa-home" aria-hidden="true"></i> Home </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="./ur-user.html" target="_blank"><i class="fa fa-home" aria-hidden="true"></i> Quick Send</a>
                    </li>
                </ul>
                <ul class="nav navbar-nav navbar-right" id="links2">
                    <li class="nav-item">
                        <a class="nav-link" href="./login.html"><i class="fa fa-sign-in" aria-hidden="true"></i> Login/Sign Up</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="./about.html"><i class="fa fa-info-circle" aria-hidden="true"></i> About</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="./contact.html"><i class="fa fa-address-book" aria-hidden="true"></i> Contact Us</a>
                    </li>
                </ul>
            </div>
        </nav>
            
        <!-- END NAVBAR -->
        
        
        <!-- BEGIN MAIN -->
        
		<div class="container">
			<div class="omb_login">
				<h2 class="omb_authTitle" id="status">Login / <a href="#signup" onclick="signupValidate(this)">Sign up</a></h2>

				<div class="row omb_row-sm-offset-3 omb_socialButtons">
					<!--remove this for previous look. this is added from FB website -->
					<div class="col-xs-4 col-sm-3">
						<div class="fb-login-button" data-max-rows="1" onlogin="checkLoginState();" data-size="large" data-button-type="login_with" data-show-faces="false" data-auto-logout-link="false" data-use-continue-as="false"></div>
						<!--<div class="fb-login-button" data-max-rows="1" data-size="large" data-button-type="login_with" data-show-faces="false" data-auto-logout-link="false" data-use-continue-as="false"></div>-->
					</div>
					<div class="col-xs-4 col-sm-4">
						<div class="g-signin2" data-onsuccess="onSignIn" data-width="200px" data-height="40px" data-longtitle="true"></div>
					</div>
				</div>

				<div class="row omb_row-sm-offset-3 omb_loginOr">
					<div class="col-xs-12 col-sm-6">
						<hr class="omb_hrOr">
						<span class="omb_spanOr">or</span>
					</div>
				</div>

				<div class="row omb_row-sm-offset-3">
					<div class="col-xs-12 col-sm-6">
						<form class="omb_loginForm" action="" autocomplete="off" method="POST">
							<div class="input-group">
								<span class="input-group-addon"><i class="fa fa-user"></i></span>
								<input type="text" class="form-control" name="username" id="username" placeholder="username">
							</div>

							<span class="help-block" id="usernameError">Username error</span>

							<div class="input-group">
								<span class="input-group-addon"><i class="fa fa-lock"></i></span>
								<input type="password" class="form-control" name="password" id="password" placeholder="Password">
							</div>
							<span class="help-block" id="passwordError">Password error</span>
							<div class="input-group" style="visibility:hidden;" id="emailDiv">
								<span class="input-group-addon"><i class="fa fa-envelope" aria-hidden="true"></i></span>
								<input type="text" class="form-control" name="email" id="email" placeholder="email@example.com">
								
							</div>
							<span class="help-block" id="emailError">Email error</span>

							<button class="btn btn-lg btn-primary btn-block" type="submit" onclick="login(this)">Login</button>
						</form>
					</div>
				</div>
				<div class="row omb_row-sm-offset-3">
					<div class="col-xs-12 col-sm-3">
						<label class="checkbox">
					<input type="checkbox" value="remember-me">Remember Me
				</label>
					</div>
					<div class="col-xs-12 col-sm-3">
						<p class="omb_forgotPwd">
							<a href="#" id="forgotPass">Forgot password?</a>
						</p>
					</div>
				</div>
			</div>
		</div>
		
		<!-- END MAIN -->
		
		
		<!--- Facebook and Google Login Scripts-->
		<script>
			function fbLog() {
				//onlogin="checkLoginState();"
				checkLoginState();
			}
			// This is called with the results from from FB.getLoginStatus().
			function statusChangeCallback(response) {
				//alert("Hi Facebook");
				console.log('statusChangeCallback');
				console.log(response);
				// The response object is returned with a status field that lets the
				// app know the current login status of the person.
				// Full docs on the response object can be found in the documentation
				// for FB.getLoginStatus().
				var user = " ";
				FB.api('/me', function(response) {

					sessionStorage.setItem("userName", response.name);
				});
				if (response.status === 'connected') {
					// Logged into your app and Facebook.
					//testAPI();
					var type = "FacebookLogin";
					FB.api('/me', { locale: 'tr_TR', fields: 'name, email' },
						function(response) {
							/*console.log(response.email);
							console.log(response.name);
							console.log(response.gender);
							console.log(response.birthday);
							console.log(response.hometown);
							console.log(response.education);
							console.log(response.website);
							console.log(response.work);*/
							sessionStorage.setItem("userName", response.name); 
							sessionStorage.setItem("emailID",response.email);
							alert("Hi"+ " "+response.email);
						}, {scope:'email'}
						);
						
						//sessionStorage.setItem("emailID",response.email);
						//sessionStorage.setItem("userName", response.name); 
						//alert(response.email);
						sessionStorage.setItem("typeofLogin", type); window.open("dashboard.html", "_self");
						//window.close();
					}
					else {
						// The person is not logged into your app or we are unable to tell.
						document.getElementById('status').innerHTML = 'Please log ' +
							'into this app.';
						//alert("Please log in to the app");
					}
				}

				// This function is called when someone finishes with the Login
				// Button.  See the onlogin handler attached to it in the sample
				// code below.
				function checkLoginState() {
					//alert("Hi");
					FB.getLoginStatus(function(response) {

						statusChangeCallback(response);
					});
				}

				window.fbAsyncInit = function() {
					FB.init({
						appId: '152162102051722',
						cookie: true, // enable cookies to allow the server to access 
						// the session
						xfbml: true, // parse social plugins on this page
						version: 'v2.8' // use graph api version 2.8
					});

					// Now that we've initialized the JavaScript SDK, we call 
					// FB.getLoginStatus().  This function gets the state of the
					// person visiting this page and can return one of three states to
					// the callback you provide.  They can be:
					//
					// 1. Logged into your app ('connected')
					// 2. Logged into Facebook, but not your app ('not_authorized')
					// 3. Not logged into Facebook and can't tell if they are logged into
					//    your app or not.
					//
					// These three cases are handled in the callback function.

					FB.getLoginStatus(function(response) {
						statusChangeCallback(response);
					});

				};

				// Load the SDK asynchronously
				(function(d, s, id) {
					var js, fjs = d.getElementsByTagName(s)[0];
					if (d.getElementById(id)) return;
					js = d.createElement(s);
					js.id = id;
					js.src = "//connect.facebook.net/en_US/sdk.js";
					fjs.parentNode.insertBefore(js, fjs);
				}(document, 'script', 'facebook-jssdk'));

				// Here we run a very simple test of the Graph API after login is
				// successful.  See statusChangeCallback() for when this call is made.
				function testAPI() {
					console.log('Welcome!  Fetching your information.... ');
					FB.api('/me', function(response) {
						console.log('Successful login for: ' + response.name);
						//alert("Thanks for logging in");
						document.getElementById('status').innerHTML = 'Thanks for logging in, ' + response.name + '!';
						sessionStorage.setItem("userName", response.name);
					});
				}
		</script>
		<script>
			function login(f) {
				if (validate(this)) {
					sessionStorage.setItem("typeofLogin", "normalLogin");
					window.open("dashboard.html");
				}
				else
					return false;

			}


			function validate(f) {
				var userList = ["ramaa02",
					"huntmj01", "staudj01"
				];
				var password = "adminLogin";
				/*if ((f.username.value.match(/.+@.+\.edu$/))) {
					alert("Invalid username. Remember: The username is the email id" +
						" being used. It should be a .edu email");
					/*f.usernameError.value="Invalid username. Remember: The username is the email id"+
								" being used. It should be a .edu email";
					return false;
				}*/
				//else {
					if (!(f.username.value == userList[0]) &&
						!(f.username.value == userList[1]) &&
						!(f.username.value == userList[2])) {
						alert("Invalid username. Due to lack of Database, only" +
							" admin credentials will work");
						return false;
					}
					else {
						if (f.password.value.length < 6) {
							alert("Password length too small");
							return false;
						}
						else if (!(f.password.value == password)) {
							alert("Incorrect Password. Due to lack of Database, only" +
								" only admin credentials will work");
							return false;
						}
					}
				//}
				var userN = f.username.value.split("@")[0];
				sessionStorage.setItem("userName", userN);
				sessionStorage.setItem("emailID", f.emailID.value);
				sessionStorage.setItem("password", f.password.value);

				return true;
			}
			function signupValidate(f){
				//alert('hi');
				//f.emailDiv.style.display='inline';
				//document.getElementById("emailDiv").style.display='inline';
				document.getElementById("emailDiv").style.visibility='visible';
				
				var userList = ["ramaa02",
					"huntmj01", "staudj01"
				];
				var password = "adminLogin";
				if ((f.email.value.match(/.+@.+\.edu$/))) {
					//alert("Invalid username. Remember: The username is the email id" +
					//	" being used. It should be a .edu email");
					f.usernameError.innerHTML="Invalid email. Remember: The email is the email id"+
								" being used. It should be a .edu email";
					return false;
				}
				else {
					if (!(f.username.value == userList[0]) &&
						!(f.username.value == userList[1]) &&
						!(f.username.value == userList[2])) {
						//alert("Invalid username. Due to lack of Database, only" +
						//	" admin credentials will work");
						f.usernameError.innerHTML="Invalid username";
						return false;
					}
					else {
						if (f.password.value.length < 6) {
							//alert("Password length too small");
							f.passwordError.innerHTML="Password length too small";
							return false;
						}
						else if (!(f.password.value == password)) {
							//alert("Incorrect Password. Due to lack of Database, only" +
							//	" only admin credentials will work");
							f.passwordError.innerHTML="Incorrect Password. Due to lack of Database, only" +
								" only admin credentials will work";
							return false;
						}
					}
				}
				var userN = f.username.value.split("@")[0];
				sessionStorage.setItem("userName", f.username.value);
				sessionStorage.setItem("emailID", f.email.value);
				sessionStorage.setItem("password", f.password.value);

				return true;
			}
			function proceed() {
				FB.login(function(response) {
					if (response.authResponse == 'connected') {
						window.top.location = "dashboard.html";
					}
				});
			}
		</script>
		<script>
			function onSignIn(googleUser) {
				//alert("Hi google");
				var profile = googleUser.getBasicProfile();
				/*console.log('ID: ' + profile.getId()); // Do not send to your backend! Use an ID token instead.
				console.log('Name: ' + profile.getName());
				console.log('Image URL: ' + profile.getImageUrl());
				console.log('Email: ' + profile.getEmail()); // This is null if the 'email' scope is not present.*/
				var uid = profile.getId();
				var name = profile.getName();
				var emailID = profile.getEmail();
				sessionStorage.setItem("userName", name);
				sessionStorage.setItem("userID", uid);
				sessionStorage.setItem("emailID", emailID);
				//alert(emailID);
				var type = "gmailLogin";
				sessionStorage.setItem("typeofLogin", type);
				window.open("dashboard.html", "_self");
			}
		</script>
	</body>

</html>
